== Welcome to RBACE ==

RBACE 目前是一个基于RBAC模型的权限系统的参考实现，使用filter和aop的方式，支持功能级控制和细粒度的数据过滤。

== 数据模型 ==

                       includes                includes
                        .--.                     .---.
                        |  v                     |   v
  .------.    [URs]   .------.     [RPs]     .------------.    [PRs]   .----------.
  | User |<---------->| Role |<------T------>| Permission |<---------->| Resource |
  '------' *        * '------' *     |*    * '------------' 1        * '----------'
                                     |              | *
                                     |              | [PKs]
                                     |*             | *
                              .----------.       .-------.       .------.
                              |LimitGroup|<----->| Klass |<----->| Meta |
                              '----------'*     1'-------'1     *'------'
                                   1|                               |1
                                    |         .------------.        |
                                    '---------| limitScope |--------'
                                            * '------------'*

== 功能和特点 ==
* 功能授权使用RBAC模型，授权包括 允许 拒绝 弃权
* 支持细粒度的数据级权限，通过元数据自定义条件设置访问数据的范围，包括查询和更新，支持关联关系的定义
* 支持细粒度的访问权限，如ip，时间，params 等等...，可通过元数据自定义多种条件
* 支持 current_user.can_edit_topic? current_user.can_edit_topic_with(@topic) 等调用方法(method_missing)，可以方便的根据授权控制界面
* 使用filter和AOP的方式实现权限控制和数据过滤，无须修改已有系统代码
* 使用数据库保存权限数据

* 绑定permission权限的菜单的实现
* 基于元数据的自定义查询
* 更详细的说明请参考 doc/doc.mm (FreeMind: http://freemind.sourceforge.net/wiki/index.php/Download)

== todo list ==
* 属性级权限，自定义对model每个属性的可见，可编辑权限
* 作为plugin或gem的形式发布
* 文档
* 重构
* more and more

== 使用的 环境、gems 和 plugins
ruby: 1.8.7
rails: 2.3.2
测试：shoulda factory_girl shoulda_generator
分页：will_paginate
i18n: i18n_generator
nested_set: awesome_nested_set
缓存: memcached
其他：yaml_db

== 安装和运行 ==
安装依赖的 gems
配置 config/database.yml
rake db:create:all
rake db:migrate
rake db:data:load

默认管理员登录为 admin/admin


== 目前状态 ==
+----------------------+-------+-------+---------+---------+-----+-------+
| Name                 | Lines |   LOC | Classes | Methods | M/C | LOC/M |
+----------------------+-------+-------+---------+---------+-----+-------+
| Controllers          |   782 |   668 |      11 |      73 |   6 |     7 |
| Helpers              |    27 |    26 |       0 |       1 |   0 |    24 |
| Models               |   804 |   500 |      15 |      53 |   3 |     7 |
| Libraries            |   156 |   130 |       1 |      20 |  20 |     4 |
| Integration tests    |     0 |     0 |       0 |       0 |   0 |     0 |
| Functional tests     |   152 |   113 |      10 |       8 |   0 |    12 |
| Unit tests           |   475 |   412 |      14 |       7 |   0 |    56 |
+----------------------+-------+-------+---------+---------+-----+-------+
| Total                |  2396 |  1849 |      51 |     162 |   3 |     9 |
+----------------------+-------+-------+---------+---------+-----+-------+
  Code LOC: 1324     Test LOC: 525     Code to Test Ratio: 1:0.4


by caryl
http://www.fandouai.com/articles/about_caryl
QQ群: 39864139
